from telebot import types
from config import id_chat_owner
from db import log_user_action


class StartHandler:
    def __init__(self, bot):
        self.bot = bot

    def main_menu(self, message):
        """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –¥–ª—è –∞–¥–º–∏–Ω–∞ –∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
        markup = types.ReplyKeyboardMarkup(resize_keyboard=True)

        # –ü—Ä–æ–≤–µ—Ä–∫–∞, –∫—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏–ª –∫–æ–º–∞–Ω–¥—É
        if str(message.chat.id) == id_chat_owner:
            # –ú–µ–Ω—é –¥–ª—è –∞–¥–º–∏–Ω–∞
            markup.add("üìù –í–∏–¥—ã –ø—Ä–æ—Ü–µ–¥—É—Ä", "üìã –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∑–∞–ø–∏—Å–∏", "üë• –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π")
            welcome_text = (
                "üë®‚Äçüíº –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä! –Ø –ø–æ–º–æ–≥—É –≤–∞–º —É–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø–∏—Å—è–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.\n\n"
                "–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å."
            )
        else:
            # –ú–µ–Ω—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            markup.add("üíÜ‚Äç‚ôÄÔ∏è –í–∏–¥—ã –ø—Ä–æ—Ü–µ–¥—É—Ä", "üìÖ –£–∑–Ω–∞—Ç—å –æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–∞—Ö", "üåê –î—Ä—É–≥–∏–µ —Å–æ—Ü —Å–µ—Ç–∏")
            welcome_text = (
                "üëã –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å! –Ø –≤–∞—à –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫. ü§ñ\n\n"
                "–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å –≤–∞–º —Å –∑–∞–ø–∏—Å—å—é –Ω–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö! üòä\n\n"
                "–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–Ω—É –∏–∑ –æ–ø—Ü–∏–π –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å:üëá"
            )

        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        log_user_action(
            user_id=message.chat.id,
            username=message.from_user.username,
            action_type="start",
            action_details="main_menu"
        )

        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏
        self.bot.send_message(message.chat.id, welcome_text, reply_markup=markup)

